var Z=Object.defineProperty,j=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var x=(s,t,e)=>t in s?Z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,it=(s,t)=>{for(var e in t||={})K.call(t,e)&&x(s,e,t[e]);if(N)for(var e of N(t))B.call(t,e)&&x(s,e,t[e]);return s},rt=(s,t)=>j(s,V(t));var nt=(s,t)=>{var e={};for(var i in s)K.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&N)for(var i of N(s))t.indexOf(i)<0&&B.call(s,i)&&(e[i]=s[i]);return e};var at=(s,t,e)=>new Promise((i,r)=>{var n=o=>{try{h(e.next(o))}catch(c){r(c)}},a=o=>{try{h(e.throw(o))}catch(c){r(c)}},h=o=>o.done?i(o.value):Promise.resolve(o.value).then(n,a);h((e=e.apply(s,t)).next())});var z=(()=>{class s{get underlyingResource(){return null}constructor(){this.references=0,this.capacity=0,this.is32Bits=!1,this.uniqueId=s._Counter++}}return s._Counter=0,s})();var g=class s{static _CheckLimit(t,e){let i=s._LogLimitOutputs[t];return i?i.current++:(i={limit:e,current:1},s._LogLimitOutputs[t]=i),i.current<=i.limit}static _GenerateLimitMessage(t,e=1){let i=s._LogLimitOutputs[t];if(!i||!s.MessageLimitReached)return;let r=this._Levels[e];i.current===i.limit&&s[r.name](s.MessageLimitReached.replace(/%LIMIT%/g,""+i.limit).replace(/%TYPE%/g,r.name??""))}static _AddLogEntry(t){s._LogCache=t+s._LogCache,s.OnNewCacheEntry&&s.OnNewCacheEntry(t)}static _FormatMessage(t){let e=r=>r<10?"0"+r:""+r,i=new Date;return"["+e(i.getHours())+":"+e(i.getMinutes())+":"+e(i.getSeconds())+"]: "+t}static _LogDisabled(t,e){}static _LogEnabled(t=1,e,i){let r=Array.isArray(e)?e[0]:e;if(i!==void 0&&!s._CheckLimit(r,i))return;let n=s._FormatMessage(r),a=this._Levels[t],h=Array.isArray(e)?e.slice(1):[];a.logFunc&&a.logFunc("BJS - "+n,...h);let o=`<div style='color:${a.color}'>${n}</div><br>`;s._AddLogEntry(o),s._GenerateLimitMessage(r,t)}static get LogCache(){return s._LogCache}static ClearLogCache(){s._LogCache="",s._LogLimitOutputs={},s.errorsCount=0}static set LogLevels(t){s.Log=s._LogDisabled,s.Warn=s._LogDisabled,s.Error=s._LogDisabled,[s.MessageLogLevel,s.WarningLogLevel,s.ErrorLogLevel].forEach(e=>{if((t&e)===e){let i=this._Levels[e];s[i.name]=s._LogEnabled.bind(s,e)}})}};g.NoneLogLevel=0;g.MessageLogLevel=1;g.WarningLogLevel=2;g.ErrorLogLevel=4;g.AllLogLevel=7;g.MessageLimitReached="Too many %TYPE%s (%LIMIT%), no more %TYPE%s will be reported for this message.";g._LogCache="";g._LogLimitOutputs={};g._Levels=[{},{color:"white",logFunc:console.log,name:"Log"},{color:"orange",logFunc:console.warn,name:"Warn"},{},{color:"red",logFunc:console.error,name:"Error"}];g.errorsCount=0;g.Log=g._LogEnabled.bind(g,g.MessageLogLevel);g.Warn=g._LogEnabled.bind(g,g.WarningLogLevel);g.Error=g._LogEnabled.bind(g,g.ErrorLogLevel);var v=class{get isDisposed(){return this._isDisposed}constructor(t,e,i,r=0,n=!1,a=!1,h=!1,o,c){this._isAlreadyOwned=!1,this._isDisposed=!1,t&&t.getScene?this._engine=t.getScene().getEngine():this._engine=t,this._updatable=i,this._instanced=a,this._divisor=o||1,this._label=c,e instanceof z?(this._data=null,this._buffer=e):(this._data=e,this._buffer=null),this.byteStride=h?r:r*Float32Array.BYTES_PER_ELEMENT,n||this.create()}createVertexBuffer(t,e,i,r,n,a=!1,h){let o=a?e:e*Float32Array.BYTES_PER_ELEMENT,c=r?a?r:r*Float32Array.BYTES_PER_ELEMENT:this.byteStride;return new tt(this._engine,this,t,this._updatable,!0,c,n===void 0?this._instanced:n,o,i,void 0,void 0,!0,this._divisor||h)}isUpdatable(){return this._updatable}getData(){return this._data}getBuffer(){return this._buffer}getStrideSize(){return this.byteStride/Float32Array.BYTES_PER_ELEMENT}create(t=null){!t&&this._buffer||(t=t||this._data,t&&(this._buffer?this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,t),this._data=t):this._updatable?(this._buffer=this._engine.createDynamicVertexBuffer(t,this._label),this._data=t):this._buffer=this._engine.createVertexBuffer(t,void 0,this._label)))}_rebuild(){if(this._data)this._buffer=null,this.create(this._data);else{if(!this._buffer)return;if(this._buffer.capacity>0){this._updatable?this._buffer=this._engine.createDynamicVertexBuffer(this._buffer.capacity,this._label):this._buffer=this._engine.createVertexBuffer(this._buffer.capacity,void 0,this._label);return}g.Warn(`Missing data for buffer "${this._label}" ${this._buffer?"(uniqueId: "+this._buffer.uniqueId+")":""}. Buffer reconstruction failed.`),this._buffer=null}}update(t){this.create(t)}updateDirectly(t,e,i,r=!1){this._buffer&&this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,t,r?e:e*Float32Array.BYTES_PER_ELEMENT,i?i*this.byteStride:void 0),e===0&&i===void 0?this._data=t:this._data=null)}_increaseReferences(){if(this._buffer){if(!this._isAlreadyOwned){this._isAlreadyOwned=!0;return}this._buffer.references++}}dispose(){this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._isDisposed=!0,this._data=null,this._buffer=null)}},tt=(()=>{class s{get isDisposed(){return this._isDisposed}get instanceDivisor(){return this._instanceDivisor}set instanceDivisor(e){let i=e!=0;this._instanceDivisor=e,i!==this._instanced&&(this._instanced=i,this._computeHashCode())}get _maxVerticesCount(){let e=this.getData();return e?Array.isArray(e)?e.length/(this.byteStride/4)-this.byteOffset/4:(e.byteLength-this.byteOffset)/this.byteStride:0}constructor(e,i,r,n,a,h,o,c,u,f,l=!1,b=!1,p=1,w=!1){this._isDisposed=!1;let P=!1;if(this.engine=e,typeof n=="object"&&n!==null?(P=n.updatable??!1,a=n.postponeInternalCreation,h=n.stride,o=n.instanced,c=n.offset,u=n.size,f=n.type,l=n.normalized??!1,b=n.useBytes??!1,p=n.divisor??1,w=n.takeBufferOwnership??!1,this._label=n.label):P=!!n,i instanceof v?(this._buffer=i,this._ownsBuffer=w):(this._buffer=new v(e,i,P,h,a,o,b,p,this._label),this._ownsBuffer=!0),this.uniqueId=s._Counter++,this._kind=r,f===void 0){let O=this.getData();this.type=O?s.GetDataType(O):s.FLOAT}else this.type=f;let F=s.GetTypeByteLength(this.type);b?(this._size=u||(h?h/F:s.DeduceStride(r)),this.byteStride=h||this._buffer.byteStride||this._size*F,this.byteOffset=c||0):(this._size=u||h||s.DeduceStride(r),this.byteStride=h?h*F:this._buffer.byteStride||this._size*F,this.byteOffset=(c||0)*F),this.normalized=l,this._instanced=o!==void 0?o:!1,this._instanceDivisor=o?p:0,this._alignBuffer(),this._computeHashCode()}_computeHashCode(){this.hashCode=(this.type-5120<<0)+((this.normalized?1:0)<<3)+(this._size<<4)+((this._instanced?1:0)<<6)+(this.byteStride<<12)}_rebuild(){this._buffer?._rebuild()}getKind(){return this._kind}isUpdatable(){return this._buffer.isUpdatable()}getData(){return this._buffer.getData()}getFloatData(e,i){let r=this.getData();return r?s.GetFloatData(r,this._size,this.type,this.byteOffset,this.byteStride,this.normalized,e,i):null}getBuffer(){return this._buffer.getBuffer()}getWrapperBuffer(){return this._buffer}getStrideSize(){return this.byteStride/s.GetTypeByteLength(this.type)}getOffset(){return this.byteOffset/s.GetTypeByteLength(this.type)}getSize(e=!1){return e?this._size*s.GetTypeByteLength(this.type):this._size}getIsInstanced(){return this._instanced}getInstanceDivisor(){return this._instanceDivisor}create(e){this._buffer.create(e),this._alignBuffer()}update(e){this._buffer.update(e),this._alignBuffer()}updateDirectly(e,i,r=!1){this._buffer.updateDirectly(e,i,void 0,r),this._alignBuffer()}dispose(){this._ownsBuffer&&this._buffer.dispose(),this._isDisposed=!0}forEach(e,i){s.ForEach(this._buffer.getData(),this.byteOffset,this.byteStride,this._size,this.type,e,this.normalized,i)}_alignBuffer(){}static DeduceStride(e){switch(e){case s.UVKind:case s.UV2Kind:case s.UV3Kind:case s.UV4Kind:case s.UV5Kind:case s.UV6Kind:return 2;case s.NormalKind:case s.PositionKind:return 3;case s.ColorKind:case s.ColorInstanceKind:case s.MatricesIndicesKind:case s.MatricesIndicesExtraKind:case s.MatricesWeightsKind:case s.MatricesWeightsExtraKind:case s.TangentKind:return 4;default:throw new Error("Invalid kind '"+e+"'")}}static GetDataType(e){return e instanceof Int8Array?s.BYTE:e instanceof Uint8Array?s.UNSIGNED_BYTE:e instanceof Int16Array?s.SHORT:e instanceof Uint16Array?s.UNSIGNED_SHORT:e instanceof Int32Array?s.INT:e instanceof Uint32Array?s.UNSIGNED_INT:s.FLOAT}static GetTypeByteLength(e){switch(e){case s.BYTE:case s.UNSIGNED_BYTE:return 1;case s.SHORT:case s.UNSIGNED_SHORT:return 2;case s.INT:case s.UNSIGNED_INT:case s.FLOAT:return 4;default:throw new Error(`Invalid type '${e}'`)}}static ForEach(e,i,r,n,a,h,o,c){if(e instanceof Array){let u=i/4,f=r/4;for(let l=0;l<h;l+=n){for(let b=0;b<n;b++)c(e[u+b],l+b);u+=f}}else{let u=e instanceof ArrayBuffer?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),f=s.GetTypeByteLength(a);for(let l=0;l<h;l+=n){let b=i;for(let p=0;p<n;p++){let w=s._GetFloatValue(u,a,b,o);c(w,l+p),b+=f}i+=r}}}static _GetFloatValue(e,i,r,n){switch(i){case s.BYTE:{let a=e.getInt8(r);return n&&(a=Math.max(a/127,-1)),a}case s.UNSIGNED_BYTE:{let a=e.getUint8(r);return n&&(a=a/255),a}case s.SHORT:{let a=e.getInt16(r,!0);return n&&(a=Math.max(a/32767,-1)),a}case s.UNSIGNED_SHORT:{let a=e.getUint16(r,!0);return n&&(a=a/65535),a}case s.INT:return e.getInt32(r,!0);case s.UNSIGNED_INT:return e.getUint32(r,!0);case s.FLOAT:return e.getFloat32(r,!0);default:throw new Error(`Invalid component type ${i}`)}}static GetFloatData(e,i,r,n,a,h,o,c){let u=i*s.GetTypeByteLength(r),f=o*i;if(r!==s.FLOAT||a!==u){let l=new Float32Array(f);return s.ForEach(e,n,a,i,r,f,h,(b,p)=>l[p]=b),l}if(!(e instanceof Array||e instanceof Float32Array)||n!==0||e.length!==f)if(e instanceof Array){let l=n/4;return e.slice(l,l+f)}else{if(e instanceof ArrayBuffer)return new Float32Array(e,n,f);{let l=e.byteOffset+n;if(c){let p=new Float32Array(f),w=new Float32Array(e.buffer,l,f);return p.set(w),p}let b=l%4;return b&&(l=Math.max(0,l-b)),new Float32Array(e.buffer,l,f)}}return c?e.slice():e}}return s._Counter=0,s.BYTE=5120,s.UNSIGNED_BYTE=5121,s.SHORT=5122,s.UNSIGNED_SHORT=5123,s.INT=5124,s.UNSIGNED_INT=5125,s.FLOAT=5126,s.PositionKind="position",s.NormalKind="normal",s.TangentKind="tangent",s.UVKind="uv",s.UV2Kind="uv2",s.UV3Kind="uv3",s.UV4Kind="uv4",s.UV5Kind="uv5",s.UV6Kind="uv6",s.ColorKind="color",s.ColorInstanceKind="instanceColor",s.MatricesIndicesKind="matricesIndices",s.MatricesWeightsKind="matricesWeights",s.MatricesIndicesExtraKind="matricesIndicesExtra",s.MatricesWeightsExtraKind="matricesWeightsExtra",s})();var Y={};function U(s,t){Y[s]=t}function gt(s){return Y[s]}var q=.45454545454545453,C=2.2,dt=(1+Math.sqrt(5))/2,H=.001;var A=class s{static BuildArray(t,e){let i=[];for(let r=0;r<t;++r)i.push(e());return i}static BuildTuple(t,e){return s.BuildArray(t,e)}};function et(s,t,e){let i=s[t];if(typeof i!="function")return null;let r=function(){let n=s.length,a=r.previous.apply(s,arguments);return e(t,n),a};return i.next=r,r.previous=i,s[t]=r,()=>{let n=r.previous;if(!n)return;let a=r.next;a?(n.next=a,a.previous=n):(n.next=void 0,s[t]=n),r.next=void 0,r.previous=void 0}}var st=["push","splice","pop","shift","unshift"];function mt(s,t){let e=st.map(i=>et(s,i,t));return()=>{e.forEach(i=>{i?.()})}}var k=class{constructor(t,e=!1,i,r){this.initialize(t,e,i,r)}initialize(t,e=!1,i,r){return this.mask=t,this.skipNextObservers=e,this.target=i,this.currentTarget=r,this}},W=class{constructor(t,e,i=null){this.callback=t,this.mask=e,this.scope=i,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1,this._remove=null}remove(){this._remove&&this._remove()}},D=class s{static FromPromise(t,e){let i=new s;return t.then(r=>{i.notifyObservers(r)}).catch(r=>{if(e)e.notifyObservers(r);else throw r}),i}get observers(){return this._observers}constructor(t,e=!1){this.notifyIfTriggered=e,this._observers=new Array,this._numObserversMarkedAsDeleted=0,this._hasNotified=!1,this._eventState=new k(0),t&&(this._onObserverAdded=t)}add(t,e=-1,i=!1,r=null,n=!1){if(!t)return null;let a=new W(t,e,r);return a.unregisterOnNextCall=n,i?this._observers.unshift(a):this._observers.push(a),this._onObserverAdded&&this._onObserverAdded(a),this._hasNotified&&this.notifyIfTriggered&&this._lastNotifiedValue!==void 0&&this.notifyObserver(a,this._lastNotifiedValue),a._remove=()=>{this.remove(a)},a}addOnce(t){return this.add(t,void 0,void 0,void 0,!0)}remove(t){return t?(t._remove=null,this._observers.indexOf(t)!==-1?(this._deferUnregister(t),!0):!1):!1}removeCallback(t,e){for(let i=0;i<this._observers.length;i++){let r=this._observers[i];if(!r._willBeUnregistered&&r.callback===t&&(!e||e===r.scope))return this._deferUnregister(r),!0}return!1}_deferUnregister(t){t._willBeUnregistered||(this._numObserversMarkedAsDeleted++,t.unregisterOnNextCall=!1,t._willBeUnregistered=!0,setTimeout(()=>{this._remove(t)},0))}_remove(t,e=!0){if(!t)return!1;let i=this._observers.indexOf(t);return i!==-1?(e&&this._numObserversMarkedAsDeleted--,this._observers.splice(i,1),!0):!1}makeObserverTopPriority(t){this._remove(t,!1),this._observers.unshift(t)}makeObserverBottomPriority(t){this._remove(t,!1),this._observers.push(t)}notifyObservers(t,e=-1,i,r,n){if(this.notifyIfTriggered&&(this._hasNotified=!0,this._lastNotifiedValue=t),!this._observers.length)return!0;let a=this._eventState;a.mask=e,a.target=i,a.currentTarget=r,a.skipNextObservers=!1,a.lastReturnValue=t,a.userInfo=n;for(let h of this._observers)if(!h._willBeUnregistered&&(h.mask&e&&(h.unregisterOnNextCall&&this._deferUnregister(h),h.scope?a.lastReturnValue=h.callback.apply(h.scope,[t,a]):a.lastReturnValue=h.callback(t,a)),a.skipNextObservers))return!1;return!0}notifyObserver(t,e,i=-1){if(this.notifyIfTriggered&&(this._hasNotified=!0,this._lastNotifiedValue=e),t._willBeUnregistered)return;let r=this._eventState;r.mask=i,r.skipNextObservers=!1,t.unregisterOnNextCall&&this._deferUnregister(t),t.callback(e,r)}hasObservers(){return this._observers.length-this._numObserversMarkedAsDeleted>0}clear(){for(;this._observers.length;){let t=this._observers.pop();t&&(t._remove=null)}this._onObserverAdded=null,this._numObserversMarkedAsDeleted=0,this.cleanLastNotifiedState()}cleanLastNotifiedState(){this._hasNotified=!1,this._lastNotifiedValue=void 0}clone(){let t=new s;return t._observers=this._observers.slice(0),t}hasSpecificMask(t=-1){for(let e of this._observers)if(e.mask&t||e.mask===t)return!0;return!1}};var T=class{static get LastCreatedEngine(){return this.Instances.length===0?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}};T.Instances=[];T.OnEnginesDisposedObservable=new D;T._LastCreatedScene=null;T.UseFallbackTexture=!0;T.FallbackTexture="";function $(s,t,e=1401298e-51){return Math.abs(s-t)<=e}function J(s,t){return s===t?s:Math.random()*(t-s)+s}function Q(s,t,e){return s+(t-s)*e}function L(s,t=0,e=1){return Math.min(e,Math.max(t,s))}function X(s){return s-=Math.PI*2*Math.floor((s+Math.PI)/(Math.PI*2)),s}function m(s){let t=s.toString(16);return s<=15?("0"+t).toUpperCase():t.toUpperCase()}var d=class s{static Sign(t){return t=+t,t===0||isNaN(t)?t:t>0?1:-1}static Log2(t){return Math.log(t)*Math.LOG2E}static ILog2(t){if(Math.log2)return Math.floor(Math.log2(t));if(t<0)return NaN;if(t===0)return-1/0;let e=0;if(t<1){for(;t<1;)e++,t=t*2;e=-e}else if(t>1)for(;t>1;)e++,t=Math.floor(t/2);return e}static Repeat(t,e){return t-Math.floor(t/e)*e}static Normalize(t,e,i){return(t-e)/(i-e)}static Denormalize(t,e,i){return t*(i-e)+e}static DeltaAngle(t,e){let i=s.Repeat(e-t,360);return i>180&&(i-=360),i}static PingPong(t,e){let i=s.Repeat(t,e*2);return e-Math.abs(i-e)}static SmoothStep(t,e,i){let r=s.Clamp(i);return r=-2*r*r*r+3*r*r,e*r+t*(1-r)}static MoveTowards(t,e,i){let r=0;return Math.abs(e-t)<=i?r=e:r=t+s.Sign(e-t)*i,r}static MoveTowardsAngle(t,e,i){let r=s.DeltaAngle(t,e),n=0;return-i<r&&r<i?n=e:(e=t+r,n=s.MoveTowards(t,e,i)),n}static LerpAngle(t,e,i){let r=s.Repeat(e-t,360);return r>180&&(r-=360),t+r*L(i)}static InverseLerp(t,e,i){let r=0;return t!=e?r=L((i-t)/(e-t)):r=0,r}static Hermite(t,e,i,r,n){let a=n*n,h=n*a,o=2*h-3*a+1,c=-2*h+3*a,u=h-2*a+n,f=h-a;return t*o+i*c+e*u+r*f}static Hermite1stDerivative(t,e,i,r,n){let a=n*n;return(a-n)*6*t+(3*a-4*n+1)*e+(-a+n)*6*i+(3*a-2*n)*r}static RangeToPercent(t,e,i){return(t-e)/(i-e)}static PercentToRange(t,e,i){return(i-e)*t+e}static HCF(t,e){let i=t%e;return i===0?e:s.HCF(e,i)}};d.TwoPi=Math.PI*2;d.WithinEpsilon=$;d.ToHex=m;d.Clamp=L;d.Lerp=Q;d.RandomRange=J;d.NormalizeRadians=X;function R(s){return Math.pow(s,C)}function E(s){return s<=.04045?.0773993808*s:Math.pow(.947867299*(s+.055),2.4)}function _(s){return Math.pow(s,q)}function I(s){return s<=.0031308?12.92*s:1.055*Math.pow(s,.41666)-.055}var S=class s{constructor(t=0,e=0,i=0){this.r=t,this.g=e,this.b=i}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let t=this.r*255|0;return t=t*397^(this.g*255|0),t=t*397^(this.b*255|0),t}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this}fromArray(t,e=0){return s.FromArrayToRef(t,e,this),this}toColor4(t=1){return new M(this.r,this.g,this.b,t)}asArray(){return[this.r,this.g,this.b]}toLuminance(){return this.r*.3+this.g*.59+this.b*.11}multiply(t){return new s(this.r*t.r,this.g*t.g,this.b*t.b)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e}multiplyInPlace(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyByFloats(t,e,i){return new s(this.r*t,this.g*e,this.b*i)}divide(t){throw new ReferenceError("Can not divide a color")}divideToRef(t,e){throw new ReferenceError("Can not divide a color")}divideInPlace(t){throw new ReferenceError("Can not divide a color")}minimizeInPlace(t){return this.minimizeInPlaceFromFloats(t.r,t.g,t.b)}maximizeInPlace(t){return this.maximizeInPlaceFromFloats(t.r,t.g,t.b)}minimizeInPlaceFromFloats(t,e,i){return this.r=Math.min(t,this.r),this.g=Math.min(e,this.g),this.b=Math.min(i,this.b),this}maximizeInPlaceFromFloats(t,e,i){return this.r=Math.max(t,this.r),this.g=Math.max(e,this.g),this.b=Math.max(i,this.b),this}floorToRef(t){throw new ReferenceError("Can not floor a color")}floor(){throw new ReferenceError("Can not floor a color")}fractToRef(t){throw new ReferenceError("Can not fract a color")}fract(){throw new ReferenceError("Can not fract a color")}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b}equalsFloats(t,e,i){return this.equalsToFloats(t,e,i)}equalsToFloats(t,e,i){return this.r===t&&this.g===e&&this.b===i}equalsWithEpsilon(t,e=H){return d.WithinEpsilon(this.r,t.r,e)&&d.WithinEpsilon(this.g,t.g,e)&&d.WithinEpsilon(this.b,t.b,e)}negate(){throw new ReferenceError("Can not negate a color")}negateInPlace(){throw new ReferenceError("Can not negate a color")}negateToRef(t){throw new ReferenceError("Can not negate a color")}scale(t){return new s(this.r*t,this.g*t,this.b*t)}scaleInPlace(t){return this.r*=t,this.g*=t,this.b*=t,this}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e}clampToRef(t=0,e=1,i){return i.r=L(this.r,t,e),i.g=L(this.g,t,e),i.b=L(this.b,t,e),i}add(t){return new s(this.r+t.r,this.g+t.g,this.b+t.b)}addInPlace(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addInPlaceFromFloats(t,e,i){return this.r+=t,this.g+=e,this.b+=i,this}addToRef(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,e}subtract(t){return new s(this.r-t.r,this.g-t.g,this.b-t.b)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e}subtractInPlace(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this}subtractFromFloats(t,e,i){return new s(this.r-t,this.g-e,this.b-i)}subtractFromFloatsToRef(t,e,i,r){return r.r=this.r-t,r.g=this.g-e,r.b=this.b-i,r}clone(){return new s(this.r,this.g,this.b)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyFromFloats(t,e,i){return this.r=t,this.g=e,this.b=i,this}set(t,e,i){return this.copyFromFloats(t,e,i)}setAll(t){return this.r=this.g=this.b=t,this}toHexString(){let t=Math.round(this.r*255),e=Math.round(this.g*255),i=Math.round(this.b*255);return"#"+m(t)+m(e)+m(i)}toHSV(){return this.toHSVToRef(new s)}toHSVToRef(t){let e=this.r,i=this.g,r=this.b,n=Math.max(e,i,r),a=Math.min(e,i,r),h=0,o=0,c=n,u=n-a;return n!==0&&(o=u/n),n!=a&&(n==e?(h=(i-r)/u,i<r&&(h+=6)):n==i?h=(r-e)/u+2:n==r&&(h=(e-i)/u+4),h*=60),t.r=h,t.g=o,t.b=c,t}toLinearSpace(t=!1){let e=new s;return this.toLinearSpaceToRef(e,t),e}toLinearSpaceToRef(t,e=!1){return e?(t.r=E(this.r),t.g=E(this.g),t.b=E(this.b)):(t.r=R(this.r),t.g=R(this.g),t.b=R(this.b)),this}toGammaSpace(t=!1){let e=new s;return this.toGammaSpaceToRef(e,t),e}toGammaSpaceToRef(t,e=!1){return e?(t.r=I(this.r),t.g=I(this.g),t.b=I(this.b)):(t.r=_(this.r),t.g=_(this.g),t.b=_(this.b)),this}static HSVtoRGBToRef(t,e,i,r){let n=i*e,a=t/60,h=n*(1-Math.abs(a%2-1)),o=0,c=0,u=0;a>=0&&a<=1?(o=n,c=h):a>=1&&a<=2?(o=h,c=n):a>=2&&a<=3?(c=n,u=h):a>=3&&a<=4?(c=h,u=n):a>=4&&a<=5?(o=h,u=n):a>=5&&a<=6&&(o=n,u=h);let f=i-n;return r.r=o+f,r.g=c+f,r.b=u+f,r}static FromHSV(t,e,i){let r=new s(0,0,0);return s.HSVtoRGBToRef(t,e,i,r),r}static FromHexString(t){if(t.substring(0,1)!=="#"||t.length!==7)return new s(0,0,0);let e=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return s.FromInts(e,i,r)}static FromArray(t,e=0){return new s(t[e],t[e+1],t[e+2])}static FromArrayToRef(t,e=0,i){i.r=t[e],i.g=t[e+1],i.b=t[e+2]}static FromInts(t,e,i){return new s(t/255,e/255,i/255)}static Lerp(t,e,i){let r=new s(0,0,0);return s.LerpToRef(t,e,i,r),r}static LerpToRef(t,e,i,r){r.r=t.r+(e.r-t.r)*i,r.g=t.g+(e.g-t.g)*i,r.b=t.b+(e.b-t.b)*i}static Hermite(t,e,i,r,n){let a=n*n,h=n*a,o=2*h-3*a+1,c=-2*h+3*a,u=h-2*a+n,f=h-a,l=t.r*o+i.r*c+e.r*u+r.r*f,b=t.g*o+i.g*c+e.g*u+r.g*f,p=t.b*o+i.b*c+e.b*u+r.b*f;return new s(l,b,p)}static Hermite1stDerivative(t,e,i,r,n){let a=s.Black();return this.Hermite1stDerivativeToRef(t,e,i,r,n,a),a}static Hermite1stDerivativeToRef(t,e,i,r,n,a){let h=n*n;a.r=(h-n)*6*t.r+(3*h-4*n+1)*e.r+(-h+n)*6*i.r+(3*h-2*n)*r.r,a.g=(h-n)*6*t.g+(3*h-4*n+1)*e.g+(-h+n)*6*i.g+(3*h-2*n)*r.g,a.b=(h-n)*6*t.b+(3*h-4*n+1)*e.b+(-h+n)*6*i.b+(3*h-2*n)*r.b}static Red(){return new s(1,0,0)}static Green(){return new s(0,1,0)}static Blue(){return new s(0,0,1)}static Black(){return new s(0,0,0)}static get BlackReadOnly(){return s._BlackReadOnly}static White(){return new s(1,1,1)}static Purple(){return new s(.5,0,.5)}static Magenta(){return new s(1,0,1)}static Yellow(){return new s(1,1,0)}static Gray(){return new s(.5,.5,.5)}static Teal(){return new s(0,1,1)}static Random(){return new s(Math.random(),Math.random(),Math.random())}};S._BlackReadOnly=S.Black();Object.defineProperties(S.prototype,{dimension:{value:[3]},rank:{value:1}});var M=class s{constructor(t=0,e=0,i=0,r=1){this.r=t,this.g=e,this.b=i,this.a=r}asArray(){return[this.r,this.g,this.b,this.a]}toArray(t,e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this.a=t[e+3],this}equals(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}add(t){return new s(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}addToRef(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,e.a=this.a+t.a,e}addInPlace(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}addInPlaceFromFloats(t,e,i,r){return this.r+=t,this.g+=e,this.b+=i,this.a+=r,this}subtract(t){return new s(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}subtractToRef(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,e}subtractInPlace(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}subtractFromFloats(t,e,i,r){return new s(this.r-t,this.g-e,this.b-i,this.a-r)}subtractFromFloatsToRef(t,e,i,r,n){return n.r=this.r-t,n.g=this.g-e,n.b=this.b-i,n.a=this.a-r,n}scale(t){return new s(this.r*t,this.g*t,this.b*t,this.a*t)}scaleInPlace(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}scaleToRef(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,e}scaleAndAddToRef(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,e}clampToRef(t=0,e=1,i){return i.r=L(this.r,t,e),i.g=L(this.g,t,e),i.b=L(this.b,t,e),i.a=L(this.a,t,e),i}multiply(t){return new s(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}multiplyToRef(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e}multiplyInPlace(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this.a*=t.a,this}multiplyByFloats(t,e,i,r){return new s(this.r*t,this.g*e,this.b*i,this.a*r)}divide(t){throw new ReferenceError("Can not divide a color")}divideToRef(t,e){throw new ReferenceError("Can not divide a color")}divideInPlace(t){throw new ReferenceError("Can not divide a color")}minimizeInPlace(t){return this.r=Math.min(this.r,t.r),this.g=Math.min(this.g,t.g),this.b=Math.min(this.b,t.b),this.a=Math.min(this.a,t.a),this}maximizeInPlace(t){return this.r=Math.max(this.r,t.r),this.g=Math.max(this.g,t.g),this.b=Math.max(this.b,t.b),this.a=Math.max(this.a,t.a),this}minimizeInPlaceFromFloats(t,e,i,r){return this.r=Math.min(t,this.r),this.g=Math.min(e,this.g),this.b=Math.min(i,this.b),this.a=Math.min(r,this.a),this}maximizeInPlaceFromFloats(t,e,i,r){return this.r=Math.max(t,this.r),this.g=Math.max(e,this.g),this.b=Math.max(i,this.b),this.a=Math.max(r,this.a),this}floorToRef(t){throw new ReferenceError("Can not floor a color")}floor(){throw new ReferenceError("Can not floor a color")}fractToRef(t){throw new ReferenceError("Can not fract a color")}fract(){throw new ReferenceError("Can not fract a color")}negate(){throw new ReferenceError("Can not negate a color")}negateInPlace(){throw new ReferenceError("Can not negate a color")}negateToRef(t){throw new ReferenceError("Can not negate a color")}equalsWithEpsilon(t,e=H){return d.WithinEpsilon(this.r,t.r,e)&&d.WithinEpsilon(this.g,t.g,e)&&d.WithinEpsilon(this.b,t.b,e)&&d.WithinEpsilon(this.a,t.a,e)}equalsToFloats(t,e,i,r){return this.r===t&&this.g===e&&this.b===i&&this.a===r}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let t=this.r*255|0;return t=t*397^(this.g*255|0),t=t*397^(this.b*255|0),t=t*397^(this.a*255|0),t}clone(){return new s().copyFrom(this)}copyFrom(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}copyFromFloats(t,e,i,r){return this.r=t,this.g=e,this.b=i,this.a=r,this}set(t,e,i,r){return this.copyFromFloats(t,e,i,r)}setAll(t){return this.r=this.g=this.b=this.a=t,this}toHexString(t=!1){let e=Math.round(this.r*255),i=Math.round(this.g*255),r=Math.round(this.b*255);if(t)return"#"+m(e)+m(i)+m(r);let n=Math.round(this.a*255);return"#"+m(e)+m(i)+m(r)+m(n)}toLinearSpace(t=!1){let e=new s;return this.toLinearSpaceToRef(e,t),e}toLinearSpaceToRef(t,e=!1){return e?(t.r=E(this.r),t.g=E(this.g),t.b=E(this.b)):(t.r=R(this.r),t.g=R(this.g),t.b=R(this.b)),t.a=this.a,this}toGammaSpace(t=!1){let e=new s;return this.toGammaSpaceToRef(e,t),e}toGammaSpaceToRef(t,e=!1){return e?(t.r=I(this.r),t.g=I(this.g),t.b=I(this.b)):(t.r=_(this.r),t.g=_(this.g),t.b=_(this.b)),t.a=this.a,this}static FromHexString(t){if(t.substring(0,1)!=="#"||t.length!==9&&t.length!==7)return new s(0,0,0,0);let e=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16),n=t.length===9?parseInt(t.substring(7,9),16):255;return s.FromInts(e,i,r,n)}static Lerp(t,e,i){return s.LerpToRef(t,e,i,new s)}static LerpToRef(t,e,i,r){return r.r=t.r+(e.r-t.r)*i,r.g=t.g+(e.g-t.g)*i,r.b=t.b+(e.b-t.b)*i,r.a=t.a+(e.a-t.a)*i,r}static Hermite(t,e,i,r,n){let a=n*n,h=n*a,o=2*h-3*a+1,c=-2*h+3*a,u=h-2*a+n,f=h-a,l=t.r*o+i.r*c+e.r*u+r.r*f,b=t.g*o+i.g*c+e.g*u+r.g*f,p=t.b*o+i.b*c+e.b*u+r.b*f,w=t.a*o+i.a*c+e.a*u+r.a*f;return new s(l,b,p,w)}static Hermite1stDerivative(t,e,i,r,n){let a=new s;return this.Hermite1stDerivativeToRef(t,e,i,r,n,a),a}static Hermite1stDerivativeToRef(t,e,i,r,n,a){let h=n*n;a.r=(h-n)*6*t.r+(3*h-4*n+1)*e.r+(-h+n)*6*i.r+(3*h-2*n)*r.r,a.g=(h-n)*6*t.g+(3*h-4*n+1)*e.g+(-h+n)*6*i.g+(3*h-2*n)*r.g,a.b=(h-n)*6*t.b+(3*h-4*n+1)*e.b+(-h+n)*6*i.b+(3*h-2*n)*r.b,a.a=(h-n)*6*t.a+(3*h-4*n+1)*e.a+(-h+n)*6*i.a+(3*h-2*n)*r.a}static FromColor3(t,e=1){return new s(t.r,t.g,t.b,e)}static FromArray(t,e=0){return new s(t[e],t[e+1],t[e+2],t[e+3])}static FromArrayToRef(t,e=0,i){i.r=t[e],i.g=t[e+1],i.b=t[e+2],i.a=t[e+3]}static FromInts(t,e,i,r){return new s(t/255,e/255,i/255,r/255)}static CheckColors4(t,e){if(t.length===e*3){let i=[];for(let r=0;r<t.length;r+=3){let n=r/3*4;i[n]=t[r],i[n+1]=t[r+1],i[n+2]=t[r+2],i[n+3]=1}return i}return t}};Object.defineProperties(M.prototype,{dimension:{value:[4]},rank:{value:1}});var G=class{};G.Color3=A.BuildArray(3,S.Black);G.Color4=A.BuildArray(3,()=>new M(0,0,0,0));U("BABYLON.Color3",S);U("BABYLON.Color4",M);var y=function(s){return s[s.GLSL=0]="GLSL",s[s.WGSL=1]="WGSL",s}(y||{});var Gt=(()=>{class s{static GetShadersRepository(e=y.GLSL){return e===y.GLSL?s.ShadersRepository:s.ShadersRepositoryWGSL}static GetShadersStore(e=y.GLSL){return e===y.GLSL?s.ShadersStore:s.ShadersStoreWGSL}static GetIncludesShadersStore(e=y.GLSL){return e===y.GLSL?s.IncludesShadersStore:s.IncludesShadersStoreWGSL}}return s.ShadersRepository="src/Shaders/",s.ShadersStore={},s.IncludesShadersStore={},s.ShadersRepositoryWGSL="src/ShadersWGSL/",s.ShadersStoreWGSL={},s.IncludesShadersStoreWGSL={},s})();export{it as a,rt as b,nt as c,at as d,U as e,gt as f,k as g,D as h,q as i,C as j,H as k,A as l,mt as m,T as n,$ as o,J as p,Q as q,L as r,X as s,d as t,S as u,M as v,G as w,g as x,y,Gt as z,z as A,v as B,tt as C};
